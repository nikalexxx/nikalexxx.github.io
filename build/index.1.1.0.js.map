{"version":3,"sources":["utils/bem.js","utils/style.js","utils/symbols.js","utils/clone.js","utils/diff.js","utils/element.js","utils/css.js","utils/children.js","utils/logger.js","utils/component.js","utils/router.js","utils/custom.js","utils/consoleStyle.js","utils/class.js","utils/index.js","components/Breadcrumbs/Breadcrumbs.js","data/blog/index.js","blocks/Button/Button.js","blocks/index.js","utils/book.js","components/Post/Post.js","components/Blog/Blog.js","components/Projects/Projects.js","components/Colors/Colors.js","components/Unicode/Unicode.js","components/Design/Design.js","components/GameOfLife/GameOfLife.js","components/About/About.js","MyComponent.js","map.js","components/Page/Page.js","components/index.js","index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["block","blockName","String","element","modifiers","mixin","cssStack","elementName","push","mod","value","join","props","cssProps","prop","name","replace","x","toLowerCase","elementSymbol","Symbol","componentSymbol","getClone","cloneNode","Error","nodeType","clone","E","tagName","Object","keys","eventListeners","length","eventName","listeners","listener","addEventListener","Array","from","childNodes","child","cloneChild","append","diffObject","t","delete","primitive","array","raw","D","meta","new","isPrimitive","diff","A","B","toString","isArray","lA","lB","max","min","result","i","indexDiff","key","keyDiff","symbols","namespaceKeys","namespaces","getNode","node","elem","strToArray","strings","list","DOM","elementObject","document","createTextNode","namespace","children","createElementNS","startsWith","setAttribute","values","map","e","dom","parent","ref","patchDOM","upd","parentNode","remove","undefined","nodeValue","replaceWith","newDom","removeAttribute","removeEventListener","deleteListeners","updatedChildKeys","_key","removeChild","newChildren","example","div","class","id","style","span","p","elementStructure","T","Number","data","diffStructure","diffFunctionStructure","Function","params","diffElements","_forceUpdate","_update","diffProps","diffEventListeners","diffChildren","k","diffItems","getProps","attributes","attrs","getChildren","hasAttribute","getAttribute","getElementFromDOM","domElement","namespaceURI","getElement","Proxy","get","target","tag","create","toUpperCase","slice","console","error","nodes","filter","dublicatedKeys","Set","index","add","size","stableElement","items","apply","thisArg","argArray","S","M","getDirPath","fileUrl","URL","pathname","split","sourceUrl","relativePath","type","includes","pathRelative","test","sourcePath","fullPath","Promise","resolve","link","rel","href","head","querySelector","less","script","src","update","window","setTimeout","_log","condition","f","log","loggerSymbol","logAllLevels","setLogger","settings","getCondition","levels","current","level","createLogProxy","set","state","arg","newObject","assign","attr","logAdd","color","backgroundColor","logRemove","getElem","component","fragment","createDocumentFragment","isTypeChanged","newElement","nodeName","componentConstructor","componentName","handlerErrors","makeComponent","componentNameSymbol","didMountEvent","source","dispatchEvent","CustomEvent","detail","willUnmountEvent","prevState","handlerIndex","handlers","count","indexes","bump","initState","startState","changedStateFields","setState","newState","newStateObject","change","field","rerender","changeState","names","stateClass","init","onChange","didMount","callback","onDidMount","event","didMountListener","firstAppend","storage","elements","mo","MutationObserver","mutations","observer","closest","first","innerHTML","disconnect","observe","childList","subtree","render","hooks","componentData","diffElement","item","setComponentData","Component","historyUpdate","pushState","title","url","history","replaceState","getRouterState","routes","location","search","path","URLSearchParams","stack","param","resultParams","resultPath","pathStack","equal","RouteLink","onLinkClick","preventDefault","a","onClick","Switch","getCustom","CustomElement","shadow","attachShadow","mode","slot","HTMLElement","customName","customElements","define","Custom","css","text","consoleStyle","textList","styles","args","s","v","local","mix","background","_func","_var","_const","_op","func","_b","_i","_pre","_h","l","text1","styles1","Class","createClass","fields","getter","initialValues","constructor","o","object","b","Breadcrumbs","last","creationTime","tags","Button","button","createBook","to","types","html","V","stringElements","brs","match","tail","br","indexOf","subbrs","j","code","pre","h","n","img","alt","external","markdown","repeat","browserConsole","Post","blog","fetch","then","blob","default","catch","template","iframe","iframeElem","getElementById","height","contentWindow","body","clientHeight","h2","em","Date","toLocaleString","year","month","day","timezone","hour","minute","second","Blog","total","sort","keyA","keyB","getMs","h3","Projects","padding","colors","Colors","getComputedStyle","documentElement","getPropertyValue","trim","rgb","hex","parseInt","Math","contrast","border","colorNode","limit","getUnicodeList","start","end","table","fromCharCode","Unicode","startI","endI","active","Design","fontSize","fontWeight","range","Game","getState","H","W","stop","canvas","img_data","ctx","rule","old","fieldState","fieldStateNext","startFieldState","set_life","getContext","alpha","getImageData","draw","life","torsum","i_top_W","i_down_W","i_W","j_l","j_r","clear","putImageData","step","sum","one_step","reduce","rules","update_rule","querySelectorAll","checked","width","input","label","initGame","paint","onmousedown","startDrawing","onmouseup","stopDrawing","onmouseout","onmousemove","context","isDrawing","strokeStyle","lineWidth","pause","beginPath","moveTo","pageX","offsetLeft","pageY","offsetTop","y","lineTo","stroke","about","MyComponent","show","visible","ok","About","book","GameOfLife","Menu","prev","renderLink","Page","header","h1","textAlign","nav","main","footer","bundleURL","getBundleURLCached","getBundleURL","err","matches","getBaseURL","exports","bundle","require","updateLink","newLink","onload","now","insertBefore","nextSibling","cssTimeout","reloadCSS","links","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","appendChild","createElement","stackTrace","innerText","getParents","modules","parents","d","dep","concat","deps","cached","cache","some","cb"],"mappings":"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EACC;AACd,eAAOA,IAAI,IAAIiU,MAAR,GAAiBA,MAAM,CAACjU,IAAD,CAAN,EAAjB,GAAkCiF,SAAzC;AACH;AAHgB,KAAd,CAAP;AAKH,GARD;AASH,EAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;;;AAEA,IAAMoP,CAAC,GAAG;AAAC3C,EAAAA,CAAC,EAAE;AAAJ,CAAV;;AAEA,SAASjN,CAAT,CAAW6P,MAAX,EAAmB,CAAE;;AAErB7P,CAAC,CAAC4P,CAAD,CAAD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AmBVA,IAAI4K,SAAS,GAAG,IAAhB;;AACA,SAASC,kBAAT,GAA8B;AAC5B,MAAI,CAACD,SAAL,EAAgB;AACdA,IAAAA,SAAS,GAAGE,YAAY,EAAxB;AACD;;AAED,SAAOF,SAAP;AACD;;AAED,SAASE,YAAT,GAAwB;AACtB;AACA,MAAI;AACF,UAAM,IAAIze,KAAJ,EAAN;AACD,GAFD,CAEE,OAAO0e,GAAP,EAAY;AACZ,QAAIC,OAAO,GAAG,CAAC,KAAKD,GAAG,CAA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","file":"index.1.1.0.js","sourceRoot":"..","sourcesContent":["const block = blockName => {\n    const block = String(blockName);\n    return function(element, modifiers, mixin) {\n        const cssStack = [];\n        const elementName = block + (element ? `__${element}` : '');\n        cssStack.push(elementName);\n        for (const mod in modifiers) {\n            const value = modifiers[mod];\n            if (typeof value === 'boolean') {\n                if (value) {\n                    cssStack.push(`${elementName}_${mod}`);\n                }\n            } else {\n                cssStack.push(`${elementName}_${mod}_${value}`);\n            }\n        }\n        return cssStack.join(' ');\n    };\n}\n\nexport default block;\n","export default function (props = {}) {\n    const cssProps = [];\n    for (const prop in props) {\n        const name = prop.replace(/[A-Z]/g, x => '-' + x.toLowerCase());\n        cssProps.push(`${name}: ${props[prop]};`);\n    }\n    return cssProps.join(' ');\n}\n","export const elementSymbol = Symbol('element');\nexport const componentSymbol = Symbol('component');\n","import {elementSymbol, componentSymbol} from './symbols.js';\nimport {E} from './element.js';\n\nexport const getClone = element => {\n    // console.log('clone', element);\n    if (!element.cloneNode) {\n        throw new Error('clone не удался')\n        return element;\n    }\n    // console.log({element});\n    if (element.nodeType === 3) {\n        return element.cloneNode(false);\n    }\n    let clone = E[element.tagName.toLowerCase()];\n    if (elementSymbol in element) {\n        clone = clone[Symbol('props')](element[elementSymbol].props)();\n        // clone[elementSymbol] = element[elementSymbol];\n    } else {\n        clone = clone();\n    }\n    if (componentSymbol in element) {\n        clone[componentSymbol] = element[componentSymbol];\n        clone[componentSymbol].element = clone;\n        // element[componentSymbol].element = clone;\n    }\n    if (element[elementSymbol] && Object.keys(element[elementSymbol].eventListeners).length > 0) {\n        for (const eventName of Object.keys(element[elementSymbol].eventListeners)) {\n            const listeners = element[elementSymbol].eventListeners[eventName];\n            for (const listener of listeners) {\n                clone.addEventListener(eventName, listener, false);\n            }\n        }\n    }\n    for (const child of Array.from(element.childNodes)) {\n        const cloneChild = getClone(child);\n        clone.append(cloneChild);\n    }\n    return clone;\n}\n","\nconst diffObject = t => [\n    t.delete, // Symbol('delete') для удаления примитива\n    t.primitive, // новое значение примитива, заменяет предыдущее значение\n    {\n        [t.array]: t`?`(true), // указывает, что значение массив, ключи будут приводится к Number\n        [t.raw]: t`?`(true), // указывает, что объект нужно включать как есть, не разбирая рекурсивно\n        [t(String)]: t`?`(diffObject),\n        [t(Symbol)]: t`?`(diffObject) // для символьных свойств\n    }\n];\n\nconst D = {\n    delete: Symbol('delete'),\n    array: Symbol('array'),\n    raw: Symbol('raw'),\n    meta: Symbol('meta'),\n    new: Symbol('new')\n};\n\nexport const isPrimitive = value => {\n    return value !== new Object(value);\n}\n\nexport const raw = value => {\n    if (isPrimitive(value)) {\n        return value;\n    }\n    // return {\n    //     ...value,\n    //     [D.raw]: true,\n    //     [D.new]: value\n    // }\n    value[D.raw] = true;\n    value[D.new] = value;\n    return value;\n}\n\n\n// TODO: добавить поддержку циклических ссылок\nexport function diff(A, B) {\n    if (A === B) { // равенство по значению(для примитивов), либо по ссылке(для объектов)\n        return {};\n    }\n    if (isPrimitive(A)) {\n        if (isPrimitive(B)) {\n            return B;\n        } else {\n            return raw(B);\n        }\n    } else {\n        if (isPrimitive(B)) {\n            return B;\n        } else {\n            if (typeof A === 'function') { // для функций заменяем всё, возможно стоит добавить другую проверку\n                if (A === B) {\n                    return {};\n                } else if (A.toString() === B.toString()) {\n                    return {};\n                }\n                return raw(B);\n            } else if (Array.isArray(A)) {\n                if (Array.isArray(B)) { // сравнение массивов\n                    const lA = A.length;\n                    const lB = B.length;\n                    const max = lA > lB ? lA : lB;\n                    const min = lA < lB ? lA : lB;\n                    const result = {};\n                    for (let i = 0; i < max; i++) {\n                        if (i < min) { // сравниваем общую часть\n                            const indexDiff = diff(A[i], B[i]); // сравниваем элементы\n                            if (isPrimitive(indexDiff) || indexDiff === D.delete || Object.keys(indexDiff).length > 0 || indexDiff[D.raw]) {\n                                result[String(i)] = indexDiff; // добавляем только отличия\n                            }\n                        } else if (lA < lB) {\n                            result[String(i)] = B[i]; // новые элементы\n                        } else {\n                            result[String(i)] = D.delete; // удаляем лишние\n                        }\n                    }\n                    if (Object.keys(result).length > 0) {\n                        result[D.array] = true;\n                    }\n                    return result;\n                } else { // просто всё затираем\n                    return raw(B);\n                }\n            } else { // обычный объект\n                if (typeof B === 'function' || Array.isArray(B)) { // не обычный объект\n                    return raw(B);\n                } else { // сравнение объектов\n                    const result = {};\n                    for (const key of Object.keys(B)) {\n                        if (!(key in A)) {\n                            result[key] = raw(B[key]); // новые ключи добавляем как есть\n                        }\n                    }\n                    for (const key of Object.keys(A)) {\n                        if (key in B) {\n                            const keyDiff = diff(A[key], B[key]); // сравниваем рекурсивно\n                            if (isPrimitive(keyDiff) || keyDiff === D.delete || Object.keys(keyDiff).length > 0 || keyDiff[D.raw]) {\n                                result[key] = keyDiff; // добавляем только отличия\n                            }\n                        } else {\n                            result[key] = D.delete; // удаляем старые ключи\n                        }\n                    }\n                    return result;\n                }\n            }\n        }\n    }\n}\n\ndiff.symbols = D;\n\n// console.log(diff([1,2,3,6,8], [1,4,3,2]));\n// console.log(diff({a:[1]}, {a:[2]}));\n// console.log(diff({a:1,b:2, c:{}}, {a:2, c: {a:{s:{}}}}));\n// console.log(document.head);\n// console.log(document.body);\n// console.log(diff(document.head, document.body));\n","import {getClone} from './clone.js';\n\nimport {elementSymbol} from './symbols.js';\n\nimport {diff, isPrimitive, raw} from './diff.js';\n\n\n\nconst namespaceKeys = {\n    'http://www.w3.org/1999/xhtml': 0,\n    'http://www.w3.org/2000/svg': 1,\n    'http://www.w3.org/1998/Math/MathML': 2\n}\n\nconst namespaces = {\n    '0': 'http://www.w3.org/1999/xhtml',\n    '1': 'http://www.w3.org/2000/svg',\n    '2': 'http://www.w3.org/1998/Math/MathML'\n}\n\n\nexport function getNode(node) {\n    if (Array.isArray(node)) {\n        const result = [];\n        for (const elem of node) {\n            if (Array.isArray(elem)) {\n                result.push(...getNode(elem));\n            } else {\n                result.push(getNode(elem));\n            }\n        }\n        return result;\n    } else if (typeof node === 'function') {\n        return getNode(node());\n    } else {\n        return node;\n    }\n}\n\nconst strToArray = (strings, ...elements) => {\n    const list = [strings[0]];\n    for (let i = 1; i < strings.length; i++) {\n        list.push(elements[i-1], strings[i]);\n    }\n    return list;\n}\n\nexport const DOM = elementObject => {\n    if (isPrimitive(elementObject)) {\n        return document.createTextNode(elementObject);\n    }\n    const {namespace, tagName, props, children, eventListeners} = elementObject;\n    const element = document.createElementNS(namespaces[String(namespace)], tagName);\n    element[elementSymbol] = {};\n    for (const prop in props) {\n        if (prop.startsWith('_')) {\n            element[elementSymbol][prop] = props[prop];\n        } else {\n            element.setAttribute(prop, String(props[prop]));\n        }\n    }\n    for (const eventName of Object.keys(eventListeners)) {\n        const listener = eventListeners[eventName];\n        element.addEventListener(eventName, listener, false);\n    }\n    if (Object.keys(children).length) {\n        element.append(...Object.values(children).map(e => {\n            const dom = DOM(e);\n            if (!isPrimitive(e)) {\n                e.dom.parent = element;\n            }\n            return dom;\n        }));\n    }\n    elementObject.dom = {ref: element};\n    element[elementSymbol] = elementObject;\n    return element;\n}\n\nexport function patchDOM(dom, diffObject) {\n    const upd = dom.parentNode;\n    if (diffObject === diff.symbols.delete) {\n        if (upd) {\n            delete dom[elementSymbol];\n            dom.remove();\n            return;\n        } else {\n            return undefined;\n        }\n    }\n    if (isPrimitive(diffObject)) {\n\n        if (dom.nodeType === 3) { // текстовый узел\n            if (dom.nodeValue === String(diffObject)) {\n                return undefined; // строки совпали\n            } else {\n                if (upd) {\n                    dom.nodeValue = String(diffObject); // обновляем текст\n                    return;\n                } else {\n                    return document.createTextNode(diffObject);\n                }\n            }\n        } else {\n            if (upd) {\n                dom.replaceWith(document.createTextNode(diffObject));\n                return;\n            } else {\n                return document.createTextNode(diffObject);\n            }\n        }\n    }\n    const {props = {}, children = {}, eventListeners = {}, [diff.symbols.raw]: raw} = diffObject;\n    if (raw) {\n        if (upd) {\n            const newDom = DOM(diffObject);\n            dom.replaceWith(newDom);\n            if (!diffObject[diff.symbols.new].dom) {\n                diffObject[diff.symbols.new].dom = {};\n            }\n            diffObject[diff.symbols.new].dom.ref = newDom;\n\n            return;\n        } else {\n            return DOM(diffObject);\n        }\n    }\n\n    // обновление свойств\n    for (const prop in props) {\n        if (props[prop] === diff.symbols.delete) {\n            if (prop.startsWith('_')) {\n                delete dom[elementSymbol][prop];\n            } else {\n                dom.removeAttribute(prop);\n            }\n        } else {\n            if (prop.startsWith('_')) {\n                dom[elementSymbol][prop] = props[prop];\n            } else {\n                dom.setAttribute(prop, props[prop]);\n            }\n        }\n    }\n\n    // обновление перехватчиков событий\n    for (const eventName of Object.keys(eventListeners)) {\n        const listener = eventListeners[eventName];\n        if (listener === diff.symbols.delete) {\n            dom.removeEventListener(eventName, eventListeners[diff.symbols.meta].deleteListeners[eventName]);\n        } else {\n            if (!listener[diff.symbols.raw]) {\n                dom.removeEventListener(eventName, eventListeners[diff.symbols.meta].deleteListeners[eventName]);\n            }\n            dom.addEventListener(eventName, listener, false);\n        }\n    }\n\n    // обновление существующих потомков\n    const list = Array.from(dom.childNodes);\n    const updatedChildKeys = {};\n    for (let i = 0; i < list.length; i++) {\n        const child = list[i];\n        const key = (child[elementSymbol] || {})._key || String(i);\n        if (key in children) {\n            if (children[key] === diff.symbols.delete) {\n                dom.removeChild(child);\n            } else {\n                patchDOM(child, children[key]);\n                updatedChildKeys[key] = true;\n            }\n        }\n    }\n\n    // добавление новых потомков\n    const newChildren = [];\n    for (const key in children) {\n        if ((!children[key][diff.symbols.raw] && !isPrimitive(children[key])) || children[key] === diff.symbols.delete) {\n            continue;\n        }\n        if (!(key in updatedChildKeys)) {\n            newChildren.push(DOM(children[key]));\n        }\n    }\n    if (newChildren.length > 0) {\n        dom.append(...newChildren);\n    }\n\n    if (!diffObject[diff.symbols.new].dom) {\n        diffObject[diff.symbols.new].dom = {};\n    }\n    diffObject[diff.symbols.new].dom.ref = dom;\n\n    if (!upd) {\n        return dom;\n    }\n}\n\nconst example = E => E.div.class`example`.id`ex`.style(style)['data-value']`1`(\n    'string',\n    E.span`text`,\n    E.p('str'),\n    E`text v = ${E.span(2)}`,\n    [ // Fragment analog\n        E.div.style`color: red;`,\n        E.div.style`color: red;`('red'),\n        E.div.style`color: red;``red`,\n        E.div.style`color: red;``red ${E.span(1)}`, // red [Function]\n        E.div.style`color: red;`(E`red${E.span(1)}`) // red 1\n    ],\n    ...[1,2,3].map(i => E.i._key(i)(i)),\n    [1,2,3].map(i => E.i._key(i)(i))\n)\n\n\n\nconst elementStructure = T => ({\n    nodeType: T(Number),\n    namespace: T(String),\n    tagName: T(String),\n    props: T`?`({\n        [T(String)]: T(String)\n    }),\n    children: T`?`(Object)(T(elementStructure)),\n    data: T(String)\n});\n\nconst diffStructure = t => ({\n    nodeType: t`?`(Number), // перезаписывает тип узла\n    namespace: t`?`(String), // новое пространство имён\n    tagName: t`?`(String), // новый тег\n    props: t`?`({\n        [t(String)]: [t(String), t(null)] // переписать свойство, добавить, если нет, если null - удалить\n    }),\n    children: t`?`(Object)(t(diffStructure)), // рекурсивно повторить для потомков, лишние удалить, недостающие добавить, в будущем сопоставлять по ключу\n    data: t`?`(String), // поменять текстовый узел\n    delete: t`?`(true) // удалить элемент\n});\n\nconst diffFunctionStructure = t => t(Function)(({params}) =>\n    t({\n        params: {\n            A: t(elementStructure), // старый элемент\n            B: t(elementStructure) // новый элемент\n        }\n    })(t(diffStructure))\n);\n\n/*\nИспользовать хэши от пропсов и потомков\nв случае тектсовых нод - от значений\nможно вычислить уже на этапе создания элемента из кода\nхэш используем в качестве ключа элемента\nрассмотреть случай коллизий\n*/\nlet i = 0;\nexport function diffElements(A, B) {\n    // console.log({A, B});\n    if (!B) {\n        return diff.symbols.delete;\n    }\n    if (isPrimitive(A)) {\n        if (isPrimitive(B)) {\n            if (A !== B) {\n                return raw(B);\n            } else {\n                return {};\n            }\n        } else {\n            return raw(B);\n        }\n    }\n    if (isPrimitive(B)) {\n        return raw(B);\n    }\n    if (A.nodeType !== B.nodeType) {\n        return raw(B);\n    }\n    if (A.namespace !== B.namespace) {\n        return raw(B);\n    }\n    if (A.tagName !== B.tagName) {\n        return raw(B);\n    }\n    if (B.props._forceUpdate) {\n        return raw(B);\n    }\n    if ('_update' in B.props && !B.props._update) {\n        return {};\n    }\n    // console.time('diff props');\n    const diffProps = diff(A.props, B.props);\n    // console.timeEnd('diff props');\n    // console.time('diff events');\n    const diffEventListeners = diff(A.eventListeners, B.eventListeners);\n    for (const eventName of Object.keys(diffEventListeners)) {\n        if (diffEventListeners[eventName] === diff.symbols.delete) {\n            if (!diffEventListeners[diff.symbols.meta]) {\n                diffEventListeners[diff.symbols.meta] = {deleteListeners: {}};\n            }\n            diffEventListeners[diff.symbols.meta].deleteListeners[eventName] = A.eventListeners[eventName];\n        }\n    }\n    // console.timeEnd('diff events');\n    // const kc = 'diff children' + i;\n    // console.time(kc);\n\n    const diffChildren = {};\n    for (const key of Object.keys(B.children)) {\n        if (!(key in A.children)) {\n            diffChildren[key] = raw(B.children[key]); // новые ключи добавляем как есть\n        }\n    }\n    for (const key of Object.keys(A.children)) {\n        if (key in B.children) {\n            i++;\n            const k = 'children diff for key ' + key + i;\n            // console.time(k);\n            const diffItems = diffElements(A.children[key], B.children[key]); // сравниваем рекурсивно\n            if (isPrimitive(diffItems) || diffItems === diff.symbols.delete || Object.keys(diffItems).length > 0) {\n                diffChildren[key] = diffItems; // непустые добавляем\n            }\n            // console.timeEnd(k);\n        } else {\n            diffChildren[key] = diff.symbols.delete; // удаляем старые ключи\n        }\n    }\n    // console.timeEnd(kc);\n    // console.time('diff result');\n\n    const result = {};\n    if (Object.keys(diffProps).length > 0) {\n        result.props = diffProps;\n    }\n    if (Object.keys(diffEventListeners).length > 0) {\n        result.eventListeners = diffEventListeners;\n    }\n    if (Object.keys(diffChildren).length > 0) {\n        result.children = diffChildren;\n    }\n    result[diff.symbols.new] = B;\n    // console.timeEnd('diff result');\n\n    return result;\n}\n\nfunction getProps(attributes) {\n    if (!attributes) {\n        return {};\n    }\n    const attrs = Array.from(attributes);\n    const result = {};\n    for (const {name, value} of attrs) {\n        result[name] = value;\n    }\n    return result;\n}\n\nfunction getChildren(childNodes) {\n    if (!childNodes) {\n        return {};\n    }\n    const children = Array.from(childNodes);\n    const result = {};\n    for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const key = child.hasAttribute && child.hasAttribute('data-key') ? child.getAttribute('data-key') : String(i);\n        result[key] = getElementFromDOM(child);\n    }\n    return result;\n}\n\nfunction getElementFromDOM(domElement) {\n    return {\n        nodeType: domElement.nodeType,\n        namespace: namespaceKeys[domElement.namespaceURI],\n        tagName: domElement.tagName,\n        props: getProps(domElement.attributes),\n        children: getChildren(domElement.childNodes),\n        data: domElement.data\n    }\n}\n\n// console.log(getElementFromDOM(document.head));\n// console.log(getElementFromDOM(document.body));\n// console.log(diffElements(getElementFromDOM(document.head), getElementFromDOM(document.body)));\n\nconst getElement = namespace => new Proxy(strToArray, {\n    get(target, tag) {\n        const create = (tagName = 'div', props = {}, children = []) => {\n            const element = {\n                namespace: namespaceKeys[namespace],\n                tagName,\n                props: {},\n                children: {},\n                eventListeners: {}\n            };\n            for (const prop in props) {\n                if (prop.length > 2 && prop.startsWith('on') && prop[2] === prop[2].toUpperCase()) {\n                    const eventName = prop[2].toLowerCase() + prop.slice(3);\n                    const listener = props[prop];\n                    if (typeof listener !== 'function') {\n                        console.error(new Error(`${eventName} listener is not function`));\n                        continue;\n                    }\n                    element.eventListeners[eventName] = listener;\n                } else {\n                    element.props[prop] = (props[prop]);\n                }\n            }\n            const nodes = [];\n            for (let node of children.filter(e => e)) {\n                node = getNode(node);\n                if (Array.isArray(node)) {\n                    nodes.push(...node.filter(e => e));\n                } else {\n                    nodes.push(node);\n                }\n            }\n            const dublicatedKeys = new Set();\n            for (let i = 0; i < nodes.length; i++) {\n                const node = nodes[i];\n                const key = node.props && node.props._key && String(node.props._key);\n                const index = String(i);\n                if (key && !(key in element.children)) {\n                    element.children[key] = node;\n                } else {\n                    if (key in element.children) {\n                        dublicatedKeys.add(key);\n                    }\n                    element.children[index] = node; // TODO: рекурсивно выбрать уникальное значение\n                }\n            }\n            if (dublicatedKeys.size > 0) {\n                console.error(new Error(`keys ${[...dublicatedKeys]} have been dublicated`));\n            }\n            return element;\n        }\n        function stableElement(name, props) {\n            return new Proxy((...children) => {\n                if (Array.isArray(children[0]) && 'raw' in children[0]) {\n                    return create(name, props, strToArray(...children));\n                }\n                return create(name, props, children);\n            }, {\n                get(target, prop) {\n                    return function (value, ...items) {\n                        if (prop === '_props') {\n                            return stableElement(name, {...props, ...value});\n                        }\n                        if (Array.isArray(value) && 'raw' in value) {\n                            return stableElement(name, {...props, [prop]: strToArray(value, ...items).join('')});\n                        }\n                        return stableElement(name, {...props, [prop]: value});\n                    }\n                },\n                apply(target, thisArg, argArray) {\n                    if (Array.isArray(argArray[0]) && 'raw' in argArray[0]) {\n                        return create(name, props, strToArray(...argArray));\n                    }\n                    return create(name, props, argArray);\n                }\n            })\n        }\n        return stableElement(tag, {})\n    }\n});\n\nexport const E = getElement('http://www.w3.org/1999/xhtml');\nexport const S = getElement('http://www.w3.org/2000/svg');\nexport const M = getElement('http://www.w3.org/1998/Math/MathML');\n\n// console.log(E.div(2));\n// const onHover = () => console.log('hover!');\n// console.log(E.div.id`text`.onclick('alert(2)').onHover(onHover).onClick(() => alert('hi!'))(2, [3,4,[5,6,[7,8, () => 11, {props:{_key: 'a'}, v: 444}]]]));\n// const a = (E.div.class`example`.id`ex`.onHover(onHover).onClick(() => alert('hi!!')).style(`style`)['data-value']`1`(\n//     'string',\n//     E.span`text`,\n//     E.p('str'),\n//     E`text v = ${E.span(2)}`,\n//     [ // Fragment analog\n//         E.div.style`color: red;`,\n//         E.div.style`color: red;`('red'),\n//         E.div.style`color: red;``red`,\n//         E.div.style`color: red;``red ${E.span(1)}`, // red [Function]\n//         E.div.style`color: red;`(E`red${E.span(1)}`) // red 1\n//     ],\n//     ...[1,2,3].map(i => E.i._key(i+'2')(i)),\n//     [1,2,3].map(i => E.i._key(i+'3')(i))\n// ));\n// const b = E.div.onHover(onHover)(55);\n// const c = E.article(\n//     E.span`222${E.span(1+11)}`\n// );\n// console.log({a});\n// console.log({b});\n// console.log(DOM(a));\n// console.log(DOM(b));\n// console.log(diffElements(a, b));\n// const domA = DOM(a);\n// console.log(DOM(a));\n// patchDOM(domA, diffElements(a, b));\n// console.log(domA);\n// const domA2 = DOM(a);\n// const block = DOM(E.div());\n// block.append(domA2);\n// patchDOM(domA2, diffElements(a, b));\n// console.log(diffElements(b, c));\n// patchDOM(domA2, diffElements(b, c));\n// console.log(block);\n// console.dir(block);\n\n\n\n// E.a\n// E['a']\n\n// E[Symbol('a')]\n// E[Symbol('props')]\n// E[Symbol('ref')]\n// // E[E.$`ref`]\n// // E[E.$`props`]\n// // E[E.$({a:1, b:2})]\n// E.$ // внутри []\n\n// E`a` // firstArg.raw - возвратит массив\n\n// E('a'), E([1, 2]), E(1, 2, E.span(1)) // преобразует в DOM\n\n// // резерв\n// E.$a\n// E._\n// E._a\n// E.A\n\n","import {E, DOM} from './element.js';\nconst getDirPath = fileUrl => (new URL(fileUrl)).pathname.split('/').slice(0, -1).join('/');\nexport default function(sourceUrl, relativePath) {\n    const type = relativePath.split('.').slice(-1)[0];\n    if (!['css', 'less'].includes(type)) {\n        throw new Error(`Import file type is ${type}, but 'css' or 'less' types are available only.`);\n    }\n    const pathRelative = /^\\.\\.?\\//.test(relativePath);\n    const sourcePath = getDirPath(sourceUrl).split('/').slice(1).join('/');\n    const fullPath = sourcePath + (pathRelative ? relativePath.replace(/^\\.\\.?/, '') : '/' + relativePath);\n\n    return new Promise(resolve => {\n        const link = DOM(E.link\n            .rel(`stylesheet${type === 'less' ? '/less' : ''}`)\n            .type('text/css')\n            .href(fullPath)());\n        if (type === 'less') {\n            if (!document.head.querySelector('script[src=\"less.js\"]')) {\n                const less = E.script.src('less.js')();\n                document.head.append(DOM(less));\n            }\n            document.head.append(link);\n            function update() {\n                const style = document.head.querySelector(`style[id$=\"${fullPath.split('.')[0].replace(/\\//g, '-')}\"]`);\n                // console.log(1);\n                if (style) {\n                    window.setTimeout(resolve, 100);\n                } else {\n                    window.setTimeout(update, 10);\n                }\n            }\n            update();\n        } else {\n            document.head.append(link);\n            link.addEventListener('load', () => resolve());\n        }\n    });\n}\n","export const getChildren = children => {\n    const nodes = [];\n    for (const node of children) {\n        if (Array.isArray(node)) {\n            nodes.push(...node);\n        } else if ((typeof node) === 'function') {\n            nodes.push(node());\n        } else {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n","const _log = condition => f => {\n    if (condition) {\n        if (typeof f === 'function') {\n            f();\n        } else {\n            console.log(f);\n        }\n    }\n}\nconst loggerSymbol = Symbol('logger');\nexport const logAllLevels = Symbol('all');\nwindow[loggerSymbol] = {};\n\nexport const setLogger = settings => {\n    window[loggerSymbol] = settings;\n};\n\nfunction getCondition(levels) {\n    let current = window[loggerSymbol];\n    for (const level of levels) {\n        if(current && logAllLevels in current) {\n            return true;\n        }\n        if (!(current && level in current)) {\n            return false;\n        }\n        current = current[level];\n    }\n    return true;\n}\n\nfunction createLogProxy(levels) {\n    return new Proxy(f => _log(getCondition(levels))(f), {\n        get: (target, level) => createLogProxy([...levels, level])\n    });\n}\n\nexport const log = createLogProxy([]);\n\n","import {E, DOM, getNode, diffElements, patchDOM} from './element.js';\nimport {getClone} from './clone.js';\nimport {\n    getChildren\n} from './children.js';\nimport style from './style.js';\nimport {log} from './logger.js';\nimport {elementSymbol, componentSymbol} from './symbols.js';\n\nconst set = state => arg => {\n    let newObject;\n    if (typeof arg === 'object') {\n        newObject = arg;\n    } else if (typeof arg === 'function') {\n        newObject = arg(state);\n    }\n    return Object.assign({}, state, newObject);\n}\n\nfunction getProps(element) {\n    if (element.nodeType === 3) { // textNode\n        return {};\n    }\n    const props = {};\n    for (let i = 0; i < element.attributes.length; i++) {\n        const attr = element.attributes[i];\n        props[attr.name] = attr.value;\n    }\n    return props;\n}\n\nfunction logAdd(element) {\n    console.log('%c + ', style({\n        color: 'green',\n        backgroundColor: '#dfd'\n    }), element);\n}\n\nfunction logRemove(element) {\n    console.log('%c - ', style({\n        color: 'red',\n        backgroundColor: '#fdd'\n    }), element);\n}\n\nfunction getElem(component) {\n    if (Array.isArray(component)) {\n        const fragment = document.createDocumentFragment();\n        fragment.append(...component.map(e => getElem(e)));\n        return fragment;\n    }\n    return (typeof component === 'function') ? component() : component;\n}\n\nfunction isTypeChanged(element, newElement) {\n    if (element && !newElement) {\n        return true;\n    }\n    if (element.nodeType !== newElement.nodeType) {\n        return true;\n    }\n    if (element.nodeName !== newElement.nodeName) {\n        return true;\n    }\n    return false;\n}\n\nfunction componentConstructor(componentName) {\n    const handlerErrors = new Proxy({}, {\n        get(target, name) {\n            if (!(name in target)) {\n                target[name] = {};\n            }\n            return target[name];\n        }\n    })\n\n    return function (makeComponent) {\n        const create = (props = {}, children = []) => {\n            // уникальный идентификатор для созданного элемента\n            const componentNameSymbol = Symbol(componentName);\n\n            function didMountEvent(element, source) {\n                // console.group(`didMount[${source}]`);\n                // console.log(element);\n                // console.groupEnd();\n                window.dispatchEvent(new CustomEvent('didMount', {\n                    detail: {\n                        componentNameSymbol: element[componentSymbol].componentNameSymbol\n                    }\n                }));\n            }\n\n            function willUnmountEvent(element, source) {\n                // console.group(`willUnmount[${source}]`);\n                // console.log(element);\n                // console.groupEnd();\n                window.dispatchEvent(new CustomEvent('willUnmount', {\n                    detail: {\n                        componentNameSymbol: element[componentSymbol].componentNameSymbol\n                    }\n                }));\n            }\n\n            // состояние компонента\n            let state = {};\n\n            // предыдущее состояние\n            let prevState = {};\n\n            // элемент DOM, который будет возвращён\n            // TODO: инлайн компоненты, вложенные в одном узле, у списка это родитель\n            // структура цепочки компонентов в элементе\n            // [компонент, который возвращает массив] > [аналогично, только вложенный] > возвращает компонент > который возвращает этот элемент\n\n            let element = {};\n\n            // вызванные обработчики\n            let handlerIndex = 0;\n            const handlers = new Proxy({}, {\n                get(target, name) {\n                    if (!(name in target)) {\n                        target[name] = {\n                            count: 0,\n                            indexes: [],\n                        };\n                        target[name].bump = () => {\n                            handlerIndex++;\n                            target[name].count++;\n                            target[name].indexes.push(handlerIndex);\n                        }\n                    }\n                    return target[name];\n                }\n            });\n            // TODO: отслеживать вызовы и гарантировать порядок\n\n            function initState(startState) {\n                if (handlers.initState.count !== 0) {\n                    if (!handlerErrors.initState.count) {\n                        handlerErrors.initState.count = 1;\n                        console.error(new Error('Повторный вызов инициализации состояния'));\n                    }\n                }\n                handlers.initState.bump();\n                state = startState;\n            }\n\n            let changedStateFields = {};\n\n            function setState(newState) {\n                prevState = state;\n                const newStateObject = typeof newState === 'function' ? newState(state) : newState;\n                const change = {};\n                for (const field of Object.keys(newStateObject)) {\n                    change[field] = true;\n                }\n                changedStateFields = change;\n                // console.log({changedStateFields});\n                state = set(state)(newState);\n                rerender();\n            }\n\n            const changeState = (...names) => {\n                for (const name of names) {\n                    if (changedStateFields[name]) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n\n            const stateClass = () => state;\n            stateClass.set = setState;\n            stateClass.init = initState;\n            stateClass.onChange = changeState; // позволит писать _update(state.onChange('name', 'age'))\n            // в перспективе что-то вроде _related(['name', 'age'])\n            // идея - писать в метаинформации объектов state данные о своём state - имя, компонент и т.д.\n            // тогда при обновлении мы посмотрим, и если поля из state.set не имеют отношения к полям, от котрых зависит обновление, то элемент не обновляется\n            // более общий вопрос, как отследить зависимость от некоторого значения из состояния?\n\n            // можно связать свойство элемента со значением свойства, если передавать не само значение, а функцию, что передаёт значение. То есть не Person.age(state.age+1) а Person.age(() => state.age+1). До вызова функции мы посмотрим мету у элемента, а при вызове у значения. Но так будет не так удобно писать, поэтому это может сделать препроцессор? нежелательно!!! к тожу же если передавать просто функцию, профит исчезнет. Не пойдёт!\n            // в общем случае задача почти неразрешима\n            // можно проксировать хоть насквозь, но передай в другую функцию и ничего не выйдет\n            // опять же можно немного подхачить и использовать препроцессор для отслеживания явного применения, он должен быть достаточно умным, чтобы отслеживать зависимости применения переменных;\n            // но можно сделать зависимость от ввода или слуйность и препроцессор такое не поймает\n\n            element[componentNameSymbol] = true;\n\n            const didMount = callback => {\n                function onDidMount(event) {\n                    // console.log('DIDMOUNT', event);\n                    if (event.detail.componentNameSymbol === componentNameSymbol) {\n                        log.component(() => {\n                            // console.group('didMount -- event!!!');\n                            // console.log(element[componentSymbol].element);\n                            // console.log(componentName);\n                            // console.log(event);\n                            // console.log(callback);\n                            // console.groupEnd();\n                        });\n                        callback();\n                        // window.removeEventListener(didMountListener);\n                    }\n                }\n\n                handlers.didMount.bump();\n                const didMountListener = window.addEventListener('didMount', onDidMount, false);\n                // element[elementSymbol].props.onDidMount = onDidMount;\n                // element[elementSymbol].eventListeners.didMount = [onDidMount];\n            }\n\n            let firstAppend = true;\n\n            const storage = {};\n            const elements = [];\n\n            const mo = new MutationObserver(function (mutations, observer) {\n                // console.info('Observer');\n                // console.log({mutations, observer});\n                // console.log('didMount', firstAppend, componentName, element);\n                // console.log(handlers);\n                if (element.dom && element.dom.ref.closest('html')) {\n                    // element = false;\n                    // const componentDOMSymbol = Symbol('componentDOMSymbol');\n                    // if(!storage[componentDOMSymbol]) { // первый рендер\n                    //     storage[componentDOMSymbol] = {first: true};\n                    elements[Object.keys(elements).length] = {\n                        first: true,\n                        element: element.innerHTML\n                    };\n                    // console.log(elements);\n                    // }\n                    // if (storage[componentDOMSymbol].first) {\n                    // console.log('есть', element);\n                    // console.log({storage});\n                    // storage[componentDOMSymbol].first = false;\n                    if (firstAppend) {\n                        window.dispatchEvent(new CustomEvent('didMount', {\n                            detail: {\n                                componentNameSymbol: componentNameSymbol\n                            }\n                        }));\n                        firstAppend = false;\n                        mo.disconnect();\n                    }\n                    // }\n                } else {\n                    // console.log('нет', element);\n                    firstAppend = true;\n                    mo.disconnect();\n                }\n            });\n            mo.observe(document, {\n                attributes: true,\n                childList: true,\n                subtree: true\n            });\n\n\n            props.children = children;\n            const render = makeComponent({\n                props,\n                state: stateClass,\n                hooks: {\n                    didMount\n                }\n            });\n\n            function rerender() {\n                // console.time('get node');\n                const newElement = getNode(render());\n                // console.timeEnd('get node');\n                const dom = element.dom;\n                const componentData = element.component;\n                // console.time('diff');\n                const diffElement = diffElements(element, newElement);\n                // console.log({diffElement});\n                // console.timeEnd('diff');\n\n                // новые элементы создаются без привязки к странице\n\n                element = newElement;\n                // BUG: не сохраняется новый вид элемента\n                element.component = componentData;\n                // console.log('update:', componentName, {element, dom});\n\n                if (dom) { // есть dom\n                    // получить их diff, TODO: учитывая static\n                    // console.log({dom, diffElement});\n                    element.dom = dom;\n                    // надо перепривязать к dom всех потомков\n                    // console.time('patch DOM');\n                    patchDOM(dom.ref, diffElement);\n                    // console.timeEnd('patch DOM');\n                }\n            }\n\n            element = getNode(render()); // первый рендер\n\n            if (Array.isArray(element)) {\n                for (const item of element) {\n                    setComponentData(item, {array: true})\n                }\n            } else {\n                setComponentData(element);\n            }\n\n            function setComponentData(element, {array = false} = {}) {\n                if (!element.component) {\n                    element.component = {level: 0};\n                }\n                const level = element.component.level;\n                element.component[String(level)] = {\n                    array,\n                    name: componentName,\n                    props,\n                    state\n                }\n                element.component.level++;\n            }\n\n            // первое присоединение dom\n            // if (!element.dom) {\n                // element.dom = {};\n            // }\n            // const dom = DOM(element);\n            // element.dom.ref = dom;\n            // if (element.dom.parent) {\n            //     element.dom.parent.append(dom);\n            // }\n\n            // console.log('render:', componentName, {element});\n            return () => element;\n        }\n\n        function stableElement(props) {\n            return new Proxy((...children) => create({}, children), {\n                get(target, prop) {\n                    return function (value) {\n                        // console.log(`added prop ${prop} = ${value}`)\n                        return stableElement({\n                            ...props,\n                            [prop]: value\n                        });\n                    }\n                },\n                apply(target, thisArg, argArray) {\n                    return create(props, argArray);\n                }\n            })\n        }\n        return stableElement({});\n    };\n}\n\nconst Component = new Proxy({}, {\n    get: function (target, componentName) {\n        return componentConstructor(componentName)\n    }\n});\n\nexport default Component;\n","import {\n    E,\n    Component,\n    Custom\n} from './index.js';\n\n\nconst historyUpdate = new CustomEvent('historyUpdate');\n\nfunction pushState(data, title, url) {\n    history.pushState(data, title, url);\n    window.dispatchEvent(historyUpdate);\n}\n\nfunction replaceState(data, title, url) {\n    history.replaceState(data, title, url);\n    window.dispatchEvent(historyUpdate);\n}\n\nwindow.addEventListener('popstate', () => window.dispatchEvent(historyUpdate));\n\nexport const getRouterState = (routes) => {\n    if (!document.location.search) {\n        return {params: {}, path: '/', routes: routes('')}\n    }\n    const params = new URLSearchParams(document.location.search);\n    const stack = [];\n    for (const [param] of params) {\n        if (param[0] === '/') {\n            stack.push(...param.slice(1).split('/'));\n        }\n    }\n    let resultParams = {};\n    let resultPath = null;\n    for (const path in routes({})) {\n        const pathStack = path.split('/');\n        const params = {};\n        let equal = true;\n        for (let i = 0; i < pathStack.length; i++) {\n            if (i === stack.length) {\n                equal = false;\n                break;\n            }\n            const level = pathStack[i];\n            if (level[0] === ':') {\n                params[level.slice(1)] = stack[i];\n            } else if (level !== stack[i]) {\n                equal = false;\n                break;\n            }\n        }\n        if (equal) {\n            resultParams = params;\n            resultPath = path;\n        }\n    }\n    return {params: resultParams, path: resultPath, routes: routes(resultParams)};\n}\n\nexport const RouteLink = Component.RouteLink(({props: {href, children}}) => {\n    return () => {\n        const onLinkClick = (event) => {\n            event.preventDefault();\n            if (href === '/') {\n                pushState({stack: []}, '', '/');\n                return;\n            }\n            if (((window.history.state || {}).stack || []).join('/') === href) {\n                return;\n            }\n            pushState({\n                stack: href.split('/')\n            }, '', '?/' + href);\n        };\n        return E.a.href(href).onClick(onLinkClick)(children);\n    };\n})\n\n\nexport const Switch = Component.Switch(({props, state}) => {\n    state.init(getRouterState(props.routes));\n    window.addEventListener('historyUpdate', function () {\n        state.set(getRouterState(props.routes));\n    });\n    return () => {\n        const {path, routes} = state();\n        return routes[path];\n    }\n});\n","import {E, Component} from './index.js';\n\nlet count  = 0;\nfunction getCustom(name, elements, didMount) {\n    class CustomElement extends HTMLElement {\n        constructor() {\n            super();\n\n            const shadow = this.attachShadow({mode: 'open'});\n            shadow.append(E.slot.name('element-slot')())\n        }\n\n        connectedCallback() {\n            didMount(elements)\n        }\n    }\n    count++;\n    const customName = `custom-${name}-${count}`;\n    customElements.define(customName, CustomElement);\n    return E[customName](\n        E.div.slot('element-slot')(\n            elements\n        )\n    );\n}\n\nexport default Component.Custom(() => {\n    return ({name, children, didMount}) => {\n        return getCustom(name, children, didMount);\n    }\n});\n","export const css = new Proxy({}, {\n    get: (target, name) => text => [`%c${text}%c`, name, '']\n});\n\nexport const color = new Proxy({}, {\n    get: (target, name) => text => css[`color:${name}`](text)\n});\n\n\nexport function consoleStyle(textList, ...args) {\n    const styles = [];\n    const text = [];\n    for (let i = 0; i < textList.length - 1; i++) {\n        const s = textList[i];\n        const v = args[i][0];\n        text.push(s, v);\n        const local = args[i][1];\n        styles.push(...(Array.isArray(local) ? local : [local, args[i][2]]));\n    }\n    text.push(textList[textList.length - 1]);\n    return [text.join(''), styles];\n}\n\nexport const mix = new Proxy({}, {\n    get: (target, name) => styles => styles.map(e => `${e};${name}`)\n});\n\nconst background = color => e => mix[`background-color:${color}`](e);\n\n\nconst _key = text => color['#a53bbb'](text);\nconst _func = text => color['#35a0ed'](text);\nconst _var = text => color['#de4d57'](text);\nconst _const = text => color['#e0994a'](text);\nconst _op = text => color['#4ba6b1'](text);\nconst S = {\n    key: _key,\n    func: _func\n}\n\nconst [text, styles] = consoleStyle`\n${S.key`export`} ${S.key`function`} ${S.func`consoleStyle`}(${_var('textList')}, ...${_var('args')}) {\n    ${_key('const')} ${_var('styles')} ${_op('=')} [];\n    ${_key('const')} ${_var('text')} ${_op('=')} [];\n    ${_key('for')} (${_key('let')} ${_var('i')} ${_op('=')} ${_const('0')}; ${_var('i')} ${_op('<')} ${_var('textList')}.${_var('length')} ${_op('-')} ${_const('1')}; ${_var('i')}${_op('++')}) {\n        ${_key('const')} ${_var('s')} ${_op('=')} ${_var('textList')}[${_var('i')}];\n        ${_key('const')} ${_var('v')} ${_op('=')} ${_var('args')}[${_var('i')}][${_const('0')}];\n        ${_var('text')}.${_op('push')}(${_var('s')}, ${_var('v')});\n        ${_var('styles')}.${_op('push')}(${_var('args')}[${_var('i')}][${_const('1')}], ${_var('args')}[${_var('i')}][${_const('2')}]);\n    }\n    ${_var('text')}.${_op('push')}(${_var('textList')}[${_var('textList')}.${_var('length')} ${_op('-')} ${_const('1')}]);\n    ${_key('return')} [${_var('text')}.${_op('join')}(${_var(`''`)}), ${_var('styles')}];\n}\n`;\n// console.log(text, ...styles);\n\nexport const _b = text => css['font-weight: bold'](text);\nexport const _i = text => css['font-style: italic'](text);\nexport const _pre = text => css['font-family: monospace'](text);\nexport const _h = l => text => css[`font-size: ${21 - l}px`](text);\n\nconst [text1, styles1] = consoleStyle`${_h(1)('Документация')}\nsee http://127.0.0.1:5500/?/blog/1\n${_b('bold')} and ${_i('italic')} and ${_pre('pre')}\n`;\n// console.log(text1, ...styles1);\n\n","export function Class(createClass) {\n    const fields = {};\n    const field = new Proxy({}, {\n        get(target, prop) {\n            return getter => {\n                fields[prop] = getter;\n            }\n        }\n    });\n    return initialValues => {\n        const constructor = create => create(initialValues);\n        createClass({field, constructor});\n        return new Proxy({}, {\n            get(target, prop) {\n                return prop in fields ? fields[prop]() : undefined;\n            }\n        })\n    }\n}\n\n// const Count = Class(({constructor, field}) => {\n//     let a = 0; // private field\n//     constructor(x => {\n//         a = x;\n//     });\n//     field.a(() => a); // public field\n//     const add = () => a++; // private method\n//     field.add(() => add); // public method\n// });\n\n// const counter1 = Count(1);\n// console.log(counter1.a); // 1\n// counter1.add();\n// counter1.add();\n// console.log(counter1.a); // 3\n\n// class PrefixTree {\n//     constructor(...values) {\n//         this.tree = [[]];\n//         for (const [name, value] of values) {\n//             this.set(name, value);\n//         }\n//     }\n\n//     getTree() {\n//         return this.tree;\n//     }\n\n//     set(name, value) {\n//         name = String(name);\n//         let current = this.tree;\n//         if (name === '') {\n//             current[1] = value;\n//             return;\n//         }\n//         const list = name.split('');\n//         for (let i = 0; i < list.length; i++) {\n//             const char = list[i];\n//             if (i === list.length - 1) {\n//                 current[1] = value;\n//             } else {\n//                 let exist = false;\n//                 const l = current[0].length;\n//                 for (let j = 0; j < l; j++) {\n//                     const [c, sub] = current[0][j];\n//                     if (c === char) {\n//                         current = sub;\n//                         exist = true;\n//                         break;\n//                     }\n//                 }\n//                 if (!exist) {\n//                     current[0][l] = [char, [[]]];\n//                     current = current[0][l][1];\n//                 }\n//             }\n//         }\n//     }\n\n//     get(name) {\n//         let current = this.tree;\n//         const list = name.split('');\n//         for (let i = 0; i < list.length; i++) {\n//             const char = list[i];\n//             for (let j = 0; j < current[0].length; j++) {\n//                 const [c, sub] = current[0][j];\n//                 if (c === char) {\n//                     current = sub;\n//                     break;\n//                 }\n//                 if (j === current[0].length - 1) {\n//                     return undefined;\n//                 }\n//             }\n//         }\n//         return current[1];\n//     }\n// }\n\n// const tree = new PrefixTree();\n// const obj = {};\n// const map = new Map();\n\n// console.time('Prefix Tree');\n// for (let j = 0; j < 17; j++) {\n\n//     for (let i = 0; i < 10000; i++) {\n//         tree.set(String(Math.random()).slice(2, j), Math.random());\n//     }\n// }\n// console.timeEnd('Prefix Tree');\n\n// console.time('Native object');\n// for (let j = 0; j < 17; j++) {\n//     for (let i = 0; i < 10000; i++) {\n//         obj[String(Math.random()).slice(2, j)] = Math.random();\n//     }\n// }\n// console.timeEnd('Native object');\n\n// console.time('Native Map');\n// for (let j = 0; j < 17; j++) {\n//     for (let i = 0; i < 10000; i++) {\n//         map.set(String(Math.random()).slice(2, j), Math.random());\n//     }\n// }\n// console.timeEnd('Native Map');\n\n\n// console.log(tree.getTree());\n// console.log(obj);\n\nconst o = {a: 1};\n\nfunction e(object) {}\n\ne(o);\n","export {default as block} from './bem.js';\nexport {default as style} from './style.js';\nexport {default as css} from './css.js';\nexport {E, S, M} from './element.js';\nexport {default as Component} from './component.js';\nexport {Switch, RouteLink, getRouterState} from './router.js';\nexport {default as Custom} from './custom.js';\nexport {log, setLogger, logAllLevels} from './logger.js';\nexport {consoleStyle} from './consoleStyle.js';\nexport {Class} from './class.js';\nexport {diff} from './diff.js';\n","import {\n    E,\n    M,\n    Component,\n    RouteLink,\n    css,\n    block,\n    style\n} from '../../utils/index.js';\n\nimport './Breadcrumbs.less';\n\nconst b = block('breadcrumbs');\n\nconst Breadcrumbs = Component.Breadcrumbs(({props}) => {\n    return () => E.div.class(b())(\n        props.items\n        .map(([name, href], i) => {\n            const last = i === props.items.length - 1;\n            return E.span(\n                E.div.style('display: inline-block')(\n                    last ? name : RouteLink.href(href)(name)\n                ),\n                last ? '' : ' / '\n            );\n        })\n    );\n});\n\nexport default Breadcrumbs;\n","export default {\n    0: {\n        type: 'js',\n        creationTime: '2020-01-15T17:31:44',\n        title: 'Я создал этот сайт',\n        tags: ['web', 'site']\n    },\n    1: {\n        type: 'html',\n        creationTime: '2020-03-09T14:09:41',\n        title: 'Создаём приложение на Filemaker',\n        tags: ['filemaker', 'tutorial']\n    },\n    2: {\n        type: 'js',\n        creationTime: '2020-03-28T22:01:49',\n        title: 'Отказ от нативных es6 модулей в пользу Parcel',\n        tags: ['es6', 'parcel']\n    },\n    3: {\n        type: 'js',\n        creationTime: '2020-04-04T19:38:53',\n        title: 'Переписал движок сайта на virtual DOM',\n        tags: ['js', 'virtual dom']\n    }\n}\n","import {\n    E,\n    M,\n    Component,\n    RouteLink,\n    getRouterState,\n    Switch,\n    css,\n    block,\n    style\n} from '../../utils/index.js';\n\nimport './Button.less';\n\nconst b = block('button');\n\nconst Button = Component.Button(({props: {children, size}}) => {\n    return () => E.button.class(b())(\n        children\n    )\n})\n\nexport default Button;\n","export {default as Button} from './Button/Button.js';\n","import {E} from './element.js';\nimport { consoleStyle, _b, _i, _pre, _h } from './consoleStyle.js';\nimport {Component} from './index.js';\n\nexport function createBook(f) {\n    return {\n        to: type => {\n            const types = {\n                html: () => ({\n                    V: (strings, ...elements) => {\n                        const stringElements = strings.map(s => {\n                            const result = [];\n                            const brs = s.match(/\\n\\n+/g);\n                            if (!brs) {\n                                return s;\n                            }\n                            let tail = s;\n                            let i;\n                            for (const br of brs) {\n                                i = tail.indexOf(br);\n                                const subbrs = [];\n                                if (br.length === 2) {\n                                    subbrs.push(E.br())\n                                } else {\n                                    for (let j = 0; j < 2 * br.length - 4; j++) {\n                                        subbrs.push(E.br());\n                                    }\n                                }\n                                result.push(tail.slice(0, i), ...subbrs);\n                                tail = tail.slice(i + br.length);\n                            }\n                            result.push(tail);\n\n                            return result;\n                        })\n                        const list = [...stringElements[0]];\n                        for (let i = 1; i < strings.length; i++) {\n                            list.push(elements[i-1], ...stringElements[i]);\n                        }\n                        return list;\n                    },\n                    b: t => E.b(t),\n                    i: t => E.i(t),\n                    code: t => E.code(t),\n                    pre: t => E.pre(t),\n                    h: l => t => E[`h${l}`](t),\n                    n: E.br,\n                    p: t => E.p(t),\n                    img: (src, alt) => E.img.src(src).alt(alt),\n                    a: href => text => E.a.href(href)(text),\n                    external: f => f(E, Component)\n                }),\n                markdown: () => ({\n                    V: (strings, ...elements) => {\n                        const list = [strings[0]];\n                        for (let i = 1; i < strings.length; i++) {\n                            list.push(elements[i-1], strings[i]);\n                        }\n                        return list.join('');\n                    },\n                    b: t => `**${t}**`,\n                    i: t => `_${t}_`,\n                    code: t => `\\`${t}\\``,\n                    h: l => t => `${'#'.repeat(l)} ${t}`,\n                    n: '  \\n',\n                    p: t => `\\n\\n${t}\\n\\n`,\n                    img: (src, alt) => `![${alt || ''}](${src})`,\n                    a: href => text => `[${text || ''}](${href})`\n                }),\n                browserConsole: () => ({\n                    V: consoleStyle,\n                    b: _b,\n                    i: _i,\n                    code: _pre,\n                    h: _h,\n                    n: '\\n',\n                    p: t => t,\n                    img: (src, alt) => [`IMG[${src || ''}]: ${alt || ''}`, []],\n                    a: href => text => [`${href} (${text})`, []]\n                })\n            };\n            if (type && type in types) {\n                return f(types[type]());\n            } else {\n                throw new Error(`Invalid type. Available types: ${Object.keys(types).join()}`);\n            }\n        }\n    }\n}\n\n// const bookTemplate = createBook(({b, i, h, code, n, p, img, a, V}) =>\n// V`\n// ${h(1)('Header')}\n// ${p(V`\n// ${b('жирный')} текст ${n}\n// ${i('курсивный')} текст\n// ${img('../assets/images/favicon/favicon-32x32.png', 'favicon')}\n// `)}\n// блок ${code('программного кода')} ${n}\n// ${a('https://github.com')('Гитхаб')} - ссылка\n// `);\n\n// export const book = bookTemplate.to('html');\n\n// console.log(bookTemplate.to('markdown'));\n\n// const [text, styles] = bookTemplate.to('browserConsole');\n// console.log(text, ...styles);\n\n","import {\n    E,\n    M,\n    Component,\n    RouteLink,\n    css,\n    block,\n    style\n} from '../../utils/index.js';\n\nimport blog from '../../data/blog/index.js';\nimport {Button} from '../../blocks/index.js';\nimport {Breadcrumbs} from '../index.js';\nimport {createBook} from '../../utils/book.js';\n\nimport './Post.less';\n\nconst b = block('post');\n\nconst Post = Component.Post(({props, state, hooks: {didMount}}) => {\n    state.init({\n        text: null\n    })\n    didMount(() => {\n        const {id} = props;\n        const {type} = blog[id];\n        const path = `../data/blog/data/${id}/index.${type}`;\n        if (type === 'html') {\n            fetch(path).then(e => {\n                // console.log(e.clone().blob());\n                return e.blob()\n            }).then(data => {\n                return 'html' || data.text();\n\n            }).then(text => {\n                // console.log(text);\n                state.set({text: text});\n            });\n        } else if (type === 'js') {\n            import(path).then(data => {\n                // console.log(data);\n                state.set({text: createBook(data.default).to('html')})\n            }).catch(e => {\n                console.error(e);\n                state.set({text: 'Ошибка загрузки контента'});\n            });\n        }\n    })\n\n    return () => {\n        const {id} = props;\n        const {type} = blog[id];\n        const {text} = state();\n        const {title, creationTime} = blog[id];\n        const template = E.div.class(b('content'));\n        let elem;\n        if (type === 'html') {\n            const iframe = E.iframe.id(`iframe-post-${id}`).src(`/data/blog/data/${id}/index.${type}`).style('width: 100%; border:none; object-fit: fill; height: 100vh;')\n            setTimeout(() => {\n                const iframeElem = document.getElementById(`iframe-post-${id}`);\n                iframeElem.style.height = (iframeElem.contentWindow.document.body.clientHeight + 100) + 'px';\n            }, 300)\n            elem = template(iframe);\n        } else if (type === 'js') {\n            elem = template(text);\n        } else {\n            elem = 'Ошибка несоответствия типа контента'\n        }\n        return E.div.class(b())(\n            Breadcrumbs.items([['Блог', 'blog'], [title, `blog/${id}`]]),\n            E.h2(title),\n            E.em((new Date(creationTime)).toLocaleString('ru', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n                timezone: 'UTC',\n                hour: 'numeric',\n                minute: 'numeric',\n                second: 'numeric'\n            })),\n            E.div(elem)\n        );\n    }\n});\n\nexport default Post;\n","import {\n    E,\n    M,\n    Component,\n    RouteLink,\n    css,\n    block,\n    style\n} from '../../utils/index.js';\n\nimport blog from '../../data/blog/index.js';\nimport {Button} from '../../blocks/index.js';\n\nimport './Blog.less';\n\nconst b = block('blog');\n\nconst Blog = Component.Blog(() => {\n    const total = Object.keys(blog).length;\n    // console.log(`total ${total}`);\n\n    return () => E.div.class(b())(\n        Object.keys(blog).sort((keyA, keyB) => {\n            const getMs = key => Number(new Date(blog[key].creationTime));\n            return getMs(keyB) - getMs(keyA);\n        })\n        .map(key => {\n            const {type, creationTime, title, tags} = blog[key];\n            return E.div.class(b('post-card'))(\n                E.h3.class(b('title'))(\n                    title,\n                    E.div.class(b('read-button'))(\n                        RouteLink.href(`blog/${key}`)(\n                            Button('Читать')\n                        )\n                    )\n                ),\n                E.p(\n                    E.span.class(b('time'))(\n                        (new Date(creationTime)).toLocaleString('ru', {\n                            year: 'numeric',\n                            month: 'long',\n                            day: 'numeric',\n                            timezone: 'UTC',\n                            hour: 'numeric',\n                            minute: 'numeric',\n                            second: 'numeric'\n                        })\n                    )\n                ),\n                E.p(\n                    tags.map(tag => E.div.class(b('tag'))(tag))\n                )\n            )\n        })\n    );\n});\n\nexport default Blog;\n","import {\n    block,\n    E,\n    style,\n    Component,\n    RouteLink,\n    css\n} from '../../utils/index.js';\nimport {\n    Button\n} from '../../blocks/index.js';\n\nimport './Projects.less';\n\nconst b = block('projects');\n\nconst Projects = Component.Projects(() => {\n    return () => {\n        return E.div.class(b())(\n            E.h2('Проекты'),\n            RouteLink.href('projects/unicode')(\n                Button(\n                    E.div.style(style({padding: '16px 64px'}))(\n                        'Юникод',\n                        E.br,\n                        E.span.style`font-size: 72px`('✍')\n                    )\n                )\n            )\n        );\n    }\n});\n\nexport default Projects;\n","import {\n    block,\n    E,\n    css,\n    style,\n    Component\n} from '../../utils/index.js';\n\nimport {Breadcrumbs} from '../index.js';\n\nimport './Colors.less';\n\nconst colors = [\n    'area',\n    'menu',\n    'menu-active',\n    'menu-hover',\n    'menu-folder',\n    'element-active',\n    'string-number',\n    'syntax-variable',\n    'syntax-number',\n    'syntax-operator',\n    'syntax-gray',\n    'syntax-dark-gray',\n    'syntax-keyword',\n    'syntax-class',\n    'syntax-function',\n    'syntax-string',\n    'syntax-inline',\n    'input-text',\n    'input-area',\n    'md-link',\n    'atom-link',\n    'atom-button',\n    'atom-button-hover',\n    'atom-black-line'\n];\n\nconst b = block('colors');\n\nconst Colors = Component.Colors(() => {\n    return () => E.div(\n        Breadcrumbs.items([['Дизайн', 'design'], ['Цвета']]),\n        E.div.class(b())(\n            colors.map(color => {\n                const code = getComputedStyle(document.documentElement).getPropertyValue(`--color-${color}`).trim();\n                const rgb = (s => [s.slice(0,2), s.slice(2,4),s.slice(4)].map(hex => parseInt(hex, 16)))(code.slice(1))\n                const v = Math.max(...rgb);\n                const contrast = v > 162 ? 'black' : 'white';\n                const border = v > 38 && v < 78 ? 'solid 1px #abb2de' : '';\n                const colorNode = E.div(\n                    E.div\n                        .class(b('area', {color}))\n                        .style(style({\n                            border,\n                            color: contrast\n                        }))\n                    (\n                        E.div.class(b('name'))(code)\n                    ),\n                    E.div(color)\n                );\n                return colorNode;\n            })\n        )\n    );\n});\n\n\nexport default Colors;\n","import {\n    block,\n    E,\n    style,\n    Component,\n    RouteLink,\n    css\n} from '../../utils/index.js';\nimport {\n    Button\n} from '../../blocks/index.js';\n\nimport {Breadcrumbs} from '../index.js';\n\nimport './Unicode.less';\n\nconst b = block('unicode');\n\nconst limit = 5000;\nconst max = 65535;\nconst count = (max - (max % limit)) / limit + 1;\n\nfunction getUnicodeList(start, end) {\n    const table = [];\n    for (let i = start; i < end; i++) {\n        table.push(E.div.title(i)(String.fromCharCode(i)));\n    }\n    return table;\n}\n\nconst Unicode = Component.Unicode(({state}) => {\n    state.init({i: 0});\n\n    return () => {\n        const start = state().i;\n        const startI = start * limit;\n        const end = start * limit + limit;\n        const endI = end > max ? max : end;\n        return E.div(\n            Breadcrumbs.items([['Проекты', 'projects'], ['Юникод']]),\n            E.div.class(b())._forceUpdate(true)\n            (\n                E.div.class(b('menu'))([...(new Array(count)).keys()].map(i =>\n                    E.div\n                        .class(b('button-container'))\n                        .onClick(() => state.set({i}))\n                    (\n                        Button(E.span.class(b('button', {active: i === start}))(`${i}`))\n                    )\n                )),\n                E.div(\n                    E.h2('Юникод'),\n                    E.p(E`Пока представлена только ${E.a.href('https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane')('основная многоязычная плоскость')}`),\n                    E.br,\n                    E.p(`Cимволы ${startI} - ${endI}`),\n                    E.br,\n                    E.div._forceUpdate(true).class(b('table'))(getUnicodeList(startI, endI))\n                )\n            )\n        );\n    }\n});\n\nexport default Unicode;\n","import {\n    block,\n    E,\n    style,\n    Component,\n    RouteLink,\n    css\n} from '../../utils/index.js';\nimport {\n    Button\n} from '../../blocks/index.js';\n\nimport './Design.less';\n\nconst b = block('design');\n\nconst Design = Component.Design(() => {\n    return () => {\n        return E.div.class(b())(\n            E.h2('Дизайн'),\n            RouteLink.href('design/colors')(\n                Button(\n                    E.div.style(style({padding: '24px', fontSize: '64px', fontWeight: '500'}))(\n                        E.span.style('color: #bc514a')('Ц'),\n                        E.span.style('color: #99c27c')('в'),\n                        E.span.style('color: #65b0ed')('е'),\n                        E.span.style('color: #c57bdb')('т'),\n                        E.span.style('color: #d0996a')('а'),\n                    )\n                )\n            )\n        );\n    }\n});\n\nexport default Design;\n","import {\n    E,\n    block,\n    Component,\n    css\n} from '../../utils/index.js';\n\nimport './GameOfLife.less';\n\nconst b = block('game-of-life');\n// console.log('game of life!!!!!!!!!')\n\nconst range = (start, end) => {\n    const result = [];\n    for (let i = start; i <= end; i++) {\n        result.push(i);\n    }\n    return result;\n}\n\nconst Game = Component.Game(({\n    props,\n    getState,\n    setState,\n    initState,\n    didMount\n}) => {\n    const {\n        H = 200, W = 400\n    } = props;\n    initState({\n        i: 0,\n        size: 0,\n        stop: true,\n        H,\n        W\n    });\n\n    let canvas, img_data, data, ctx, rule = {\n        new: [2,3],\n        old: [3]\n    }, fieldState, fieldStateNext;\n\n\n    didMount(() => {\n        const {\n            startFieldState\n        } = props;\n        const {\n            H,\n            W\n        } = getState();\n\n        fieldState = new Array(H * W);\n        fieldStateNext = new Array(H * W);\n        for (let i = 0; i < H * W; i++) {\n            fieldState[i] = false;\n            fieldStateNext[i] = false;\n        }\n\n        if (startFieldState) {\n            set_life(startFieldState);\n        }\n        canvas = document.getElementById('field');\n        ctx = canvas.getContext('2d', {\n            alpha: false\n        });\n        img_data = ctx.getImageData(0, 0, W, H);\n        data = img_data.data;\n        for (let k = 0; k < H * W * 4; k++) {\n            data[k] = (k + 1) % 4 == 0 ? 255 : 0;\n        }\n\n        // paint();\n        // rules();\n\n        draw();\n        life();\n    })\n\n\n    function torsum(i, j) {\n        const {\n            H,\n            W,\n            fieldState: state\n        } = getState();\n        // положение строки над текущей клеткой\n        const i_top_W = (i ? i - 1 : H - 1) * W;\n        // положение строки под текущей клеткой\n        const i_down_W = (H - 1 - i ? i + 1 : 0) * W;\n        // положение строки текущей клетки\n        const i_W = i * W;\n        // столбец слева от текущей клетки\n        const j_l = j ? j - 1 : W - 1;\n        // столбец справа от текущей клетки\n        const j_r = W - 1 - j ? j + 1 : 0;\n        return (\n            +state[i_top_W + j_l] +\n            state[i_top_W + j] +\n            state[i_top_W + j_r] +\n            state[i_W + j_l] +\n            state[i_W + j_r] +\n            state[i_down_W + j_l] +\n            state[i_down_W + j] +\n            state[i_down_W + j_r]\n        );\n    }\n\n    function set_life(array) {\n        const {\n            W\n        } = getState();\n        for (const e of array) {\n            fieldState[(e[1] + 50) * W + e[0] + 50] = true;\n            fieldStateNext[(e[1] + 50) * W + e[0] + 50] = true;\n        }\n    }\n\n    function clear() {\n        const {W, H} = getState();\n        for (let k = 0; k < H * W * 4; k++) {\n            data[k] = (k + 1) % 4 === 0 ? 255 : 0;\n        }\n        for (let k = 0; k < H * W; k++) {\n            fieldState[k] = (data[k * 4] === 255);\n        }\n        ctx.putImageData(img_data, 0, 0);\n        setState({stop: true, i: 0});\n    }\n\n    function draw() {\n        const {H, W} = getState();\n        console.log(ctx);\n        for (let k = 0; k < H * W; k++) {\n            if (+fieldState[k] !== !data[k * 4 + 1]) {\n                data[k * 4] = fieldState[k] ? 255 : 0;\n            }\n        }\n        ctx.putImageData(img_data, 0, 0);\n    }\n\n    function step() {\n        let i, j, sum, k = 0;\n        for (i = 0; i < H; i++) {\n            for (j = 0; j < W; j++) {\n                sum = torsum(i, j);\n                if (fieldState[k]) {\n                    fieldStateNext[k] = rule.new.includes(sum);\n                } else {\n                    fieldStateNext[k] = rule.old.includes(sum);\n                }\n                k++;\n            }\n        }\n        for (k = 0; k < H * W; k++) {\n            fieldState[k] = fieldStateNext[k];\n        }\n    }\n\n    function one_step() {\n        step();\n        draw();\n        setState(prevState => ({i: prevState.i + 1}));\n    }\n\n    function life() {\n        const {stop} = getState();\n        if (!stop) {\n            one_step();\n        }\n        setState({size: fieldState.reduce((sum, x) => sum += x)});\n        setTimeout(life, 1000);\n    }\n\n    function rules() {\n        document.getElementById('cells_new').addEventListener('click', update_rule);\n        document.getElementById('cells_old').addEventListener('click', update_rule);\n\n        update(document.getElementById('cells_new').querySelector('input'));\n        update(document.getElementById('cells_old').querySelector('input'));\n\n        function update_rule(e) {\n            let elem = e.target;\n            if (elem.tagName !== 'INPUT') return;\n            update(elem);\n        }\n\n        function update(elem) {\n            type = elem.name;\n            list = elem.closest(`#cells_${type}`).querySelectorAll('input');\n            list = Array.from(list).filter(x => x.checked).map(x => +x.id);\n            rule[type] = list;\n        }\n    }\n\n    function update(elem) {\n        type = elem.name;\n        list = elem.closest(`#cells_${type}`).querySelectorAll('input');\n        list = Array.from(list).filter(x => x.checked).map(x => +x.id);\n        rule[type] = list;\n    }\n\n    return () => {\n        const {\n            stop,\n            H,\n            W,\n            i,\n            size\n        } = getState();\n        return E.div.class(b())(\n            E.canvas.id('field').width(W).height(H),\n            E.p('Поколение ', E.span.id('old')(i)),\n            E.p('Популяция ', E.span.id('size')(size)),\n            E.input.type('button')\n            .value(stop ? '>' : '||')\n            .onClick(() => {\n                setState(prevState => ({\n                    stop: !prevState.stop\n                }))\n            }).id('play'),\n            E.input.type('button').value('1>').onClick(() => one_step()),\n            E.input.type('button').value('X').onClick(() => clear()).id('btn_clear'),\n            E.br,\n            E.div.id('cells_new')(\n                E.p('Рождение'),\n                range(0, 8).map(i =>\n                    E.label(\n                        E.input.type('checkbox').name('new').id(i),\n                        i\n                    )\n                )\n            ),\n            E.br,\n            E.div.id('cells_old')(\n                E.p('Смерть'),\n                range(0, 8).map(i => E.label(E.input.type('checkbox').name('old').id(i), i))\n            )\n        );\n    }\n}).startFieldState([\n    [3, 0],\n    [4, 1],\n    [0, 2],\n    [4, 2],\n    [1, 3],\n    [2, 3],\n    [3, 3],\n    [4, 3],\n    [0, 7],\n    [1, 8],\n    [2, 8],\n    [2, 9],\n    [2, 10],\n    [1, 11],\n    [3, 14],\n    [4, 15],\n    [0, 16],\n    [4, 16],\n    [1, 17],\n    [2, 17],\n    [3, 17],\n    [4, 17]\n]);\n\n\n\n\nfunction initGame() {\n\n\n    function paint() {\n        canvas.onmousedown = startDrawing;\n        canvas.onmouseup = stopDrawing;\n        canvas.onmouseout = stopDrawing;\n        canvas.onmousemove = draw;\n\n        let context = ctx;\n        let isDrawing;\n\n        context.strokeStyle = 'rgb(255,0,0)';\n        context.lineWidth = 1;\n\n        let pause = false;\n\n        function startDrawing(e) {\n\n            // Начинаем рисовать\n            isDrawing = true;\n            if (!stop) {\n                stop = true;\n                pause = true;\n            }\n\n            // Создаем новый путь (с текущим цветом и толщиной линии)\n            context.beginPath();\n\n            // Нажатием левой кнопки мыши помещаем \"кисть\" на холст\n            context.moveTo(e.pageX - canvas.offsetLeft, e.pageY - canvas.offsetTop);\n        }\n\n\n        function draw(e) {\n            if (isDrawing == true) {\n                // Определяем текущие координаты указателя мыши\n                var x = e.pageX - canvas.offsetLeft;\n                var y = e.pageY - canvas.offsetTop;\n\n                // Рисуем линию до новой координаты\n                context.lineTo(x, y);\n                context.stroke();\n            }\n        }\n\n        function stopDrawing() {\n            isDrawing = false;\n            if (pause) {\n                stop = false;\n                pause = false;\n            }\n\n\n            img_data = ctx.getImageData(0, 0, W, H);\n            data = img_data.data;\n            for (let k = 0; k < H * W; k++) {\n                state[k] = (data[k * 4] == 255);\n            }\n        }\n    }\n\n    function rules() {\n        document.getElementById('cells_new').addEventListener('click', update_rule);\n        document.getElementById('cells_old').addEventListener('click', update_rule);\n\n        update(document.getElementById('cells_new').querySelector('input'));\n        update(document.getElementById('cells_old').querySelector('input'));\n\n        function update_rule(e) {\n            let elem = e.target;\n            if (elem.tagName !== 'INPUT') return;\n            update(elem);\n\n        }\n\n        function update(elem) {\n            type = elem.name;\n            list = elem.closest(`#cells_${type}`).querySelectorAll('input');\n            list = Array.from(list).filter(x => x.checked).map(x => +x.id);\n            rule[type] = list;\n        }\n    }\n}\n\nexport default Game;\n","import {\n    E,\n    Component,\n    RouteLink,\n    css,\n    block,\n    style\n} from '../../utils/index.js';\nimport {Button} from '../../blocks/index.js';\n\nimport './About.less';\n\nconst b = block('about');\n\nconst about = E.div.class(b())(\n    E.p('Программирую'),\n    E.p(E`Работаю в ${E.a.href('https://yandex.ru')('Яндексе')}`),\n    E.p('Люблю математику'),\n    E.p(E`Мой ${E.a.href('https://github.com/nikalexxx')('Github')}`)\n);\n\nexport default about;\n","import {\n    E,\n    Component,\n    block,\n    style\n} from './utils/index.js';\n\nimport {Button} from './blocks/index.js';\n\nconst b = block('my-component');\n\nconst MyComponent = Component.MyComponent(({props, state}) => {\n    state.init({show: true});\n\n    return () => {\n        const {state: visible} = props;\n        const {show} = state();\n        const elem = show ? E.span('elem') : null;\n        return E.div.class(b())(\n            elem,\n            E.span\n                .style(style({color: {ok: 'green', error: 'red'}[visible]}))\n                .class(b('state'))(\n                    visible\n                ),\n            E.span.onClick((e) => {\n                // console.log({show});\n                state.set(prevState => ({show: !prevState.show}));\n            })((show ? 'hide' : 'show'))\n        )\n    }\n});\n\nexport default MyComponent;\n","const map = {\n\t\"\": {},\n\t\"design\": {\n\t\t\"colors\": {\n\t\t\t\":color\": {}\n\t\t}\n    },\n    \"sandbox\": {\n        \":id\": {}\n    },\n    \"games\": {\n        \"gameOfLife\": {}\n    }\n};\n\nexport default map;\n","import {\n    E,\n    M,\n    Component,\n    RouteLink,\n    getRouterState,\n    Switch,\n    css,\n    block,\n    style\n} from '../../utils/index.js';\nimport {\n    Colors,\n    GameOfLife,\n    Design,\n    Blog,\n    Post,\n    About,\n    Projects,\n    Unicode\n} from '../index.js';\nimport {Button} from '../../blocks/index.js'\nimport MyComponent from '../../MyComponent.js';\nimport map from '../../map.js';\nimport {book} from '../../utils/book.js';\n\nimport './Page.less';\n\nconst b = block('page');\n\nconst routes = params => ({\n    '/': Blog,\n    'about': About,\n    'book': E.div(book),\n    'design': Design,\n    'design/colors': Colors,\n    // 'my/:state': E.div(\n    //     MyComponent.state(params.state),\n    //     MyComponent.state('ok'),\n    //     MyComponent.state('error'),\n    //     E.ul(\n    //         E.li`Карта кода`,\n    //         E.li`Доделать движок`,\n    //         E.li`Задизайнить юникод`,\n    //         E.li`Меню для мобильной версии`,\n    //         E.li`Таблица стандартной модели`,\n    //         E.li`Игра Жизнь`,\n    //         E.li`Светлая тема`,\n    //         E.li`Формат электронной книги`,\n    //         E.li`Калькулятор`,\n    //         E.li`Построитель графиков`,\n    //         E.li`Схема метро(позже интерактивная)`\n    //     )\n    // ),\n    'gameOfLife': GameOfLife,\n    'blog': Blog,\n    'blog/:id': Post.id(params.id),\n    'projects': Projects,\n    'projects/unicode': Unicode\n})\n\nconst Menu = Component.Menu(({state}) => {\n    const path = () => getRouterState(routes).path;\n    state.init({i: 0});\n    window.addEventListener('historyUpdate', () => state.set(prev => ({i: prev.i++})));\n    function renderLink(href, title) {\n        const current = href === path();\n        // console.log(href, path());\n        return RouteLink.href(href)(\n            E.div.class(b('menu-link', {current}))(\n                title\n            )\n        );\n    }\n    return () => E.div(\n        renderLink('blog', 'Блог'),\n        renderLink('about', 'Кто я?'),\n        // renderLink('book', 'Книга'),\n        renderLink('design', 'Дизайн'),\n        renderLink('projects', 'Проекты')\n        // renderLink('gameOfLife', 'Игра Жизнь'),\n        // renderLink('my/ok', 'тест')\n    )\n});\n\nconst Page = E.div.class(b())(\n    // E.div.class(b('header-menu'))(\n    //     E.div('Alexandr Nikolaichev'),\n    //     E.div.class(b('scroll-top')).onClick(() => window.scrollTo({top: 0}))('▲ ▲ ▲')\n    // ),\n    E.header.class(b('header'))(\n        RouteLink.href('/')(\n            E.h1.style(style({textAlign: 'center'}))('Александр Николаичев')\n        )\n    ),\n    E.nav.class(b('menu'))(Menu),\n    E.main.class(b('content'))(Switch.routes(routes)),\n    E.footer.class(b('footer'))('© 2019-2020 Alexandr Nikolaichev')\n);\n\nexport default Page;\n","        export {default as Breadcrumbs} from './Breadcrumbs/Breadcrumbs.js';\n    export {default as Post} from './Post/Post.js';\n    export {default as Blog} from './Blog/Blog.js';\n    export {default as Projects} from './Projects/Projects.js';\n    export {default as Colors} from './Colors/Colors.js';\n    export {default as Unicode} from './Unicode/Unicode.js';\n    export {default as Design} from './Design/Design.js';\n    export {default as GameOfLife} from './GameOfLife/GameOfLife.js';\n    export {default as About} from './About/About.js';\nexport {default as Page} from './Page/Page.js';\n","import {Page} from './components/index.js';\nimport {setLogger, logAllLevels} from './utils/logger.js';\nimport {DOM} from './utils/element.js';\n\nsetLogger({\n    component: {\n        props: {\n            [logAllLevels]: true\n        }\n    }\n});\nsetLogger(false); // for production\n\ndocument.getElementById('root').append(DOM(Page));\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}